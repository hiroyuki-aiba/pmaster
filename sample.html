<html>
<body>
  <p>ドメインB</p>
  <script>
    (function() {
      var origin = 'http://localhost:4200';
      window.addEventListener('message', function(event) {
        alert(event.origin);
        if(event.origin === origin) {
          var message = event.data;

          if(message === 'get') {
            var storageData = localStorage.getItem('test');
            event.source.postMessage(storageData, event.origin);
          }
          else {
            var messageArray = message.split(',');
            var key = messageArray[0];
            var value = messageArray[1];
            sessionStorage.setItem(key, value);
          }
        } else {
          console.log(event.origin);
        }
      });
    })();
  </script>
</body>
</html>
